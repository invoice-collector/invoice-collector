# Guide d'Internationalisation (i18n)

Ce document détaille le système de traduction du projet et liste toutes les clés disponibles.

## Structure des fichiers

```
locales/
├── en.json    # Traductions anglaises
└── fr.json    # Traductions françaises
```

Les fichiers `locales/` sont au même niveau que le dossier `views/`.

## Fonctionnement

### Côté serveur (EJS)

Les traductions sont injectées via la fonction `__()` d'EJS :

```html
<%= __('i18n.views.manage.add_collectors') %>
```

### Côté client (JavaScript)

Certaines traductions sont exposées au JavaScript via l'objet `i18n` défini dans le template :

```javascript
const i18n = {
    cantFindCollector: "<%= __('i18n.views.manage.cant_find_collector') %>",
    // ...
};
```

Usage dans le code :
```javascript
element.textContent = i18n.cantFindCollector;
```

## Liste complète des clés

### Navigation et actions générales

| Clé | EN | FR |
|-----|----|----|
| `i18n.views.manage.return` | Return | Retour |
| `i18n.views.manage.continue` | Continue | Continuer |
| `i18n.views.manage.close` | Close | Fermer |
| `i18n.views.manage.cancel` | Cancel | Annuler |

### Page principale - Liste des collecteurs

| Clé | EN | FR |
|-----|----|----|
| `i18n.views.manage.my_collectors` | My collectors | Mes collecteurs |
| `i18n.views.manage.add_collectors` | Add collector | Ajouter un collecteur |
| `i18n.views.manage.select_collector` | Select a collector to start | Sélectionnez un collecteur pour commencer |
| `i18n.views.manage.search_placeholder` | Search for a collector... | Rechercher un collecteur... |
| `i18n.views.manage.cant_find_collector` | Can't find collector? | Collecteur introuvable ? |
| `i18n.views.manage.let_us_know` | Let us know and we'll add it for you! | Faites-le nous savoir et nous l'ajouterons pour vous ! |
| `i18n.views.manage.request_new` | Request new | Demander |
| `i18n.views.manage.fields_required` | fields required | champs requis |
| `i18n.views.manage.field_required` | field required | champ requis |

### Formulaire de credentials

| Clé | EN | FR |
|-----|----|----|
| `i18n.views.manage.connect_account` | Connect your account to start collecting invoices | Connectez votre compte pour commencer à collecter les factures |
| `i18n.views.manage.instructions` | Instructions | Instructions |
| `i18n.views.manage.download_since` | Download Invoices Since | Télécharger les factures depuis |
| `i18n.views.manage.download_since_helper` | Choose a date to start collecting invoices from. | Choisissez une date pour commencer la collecte des factures. |
| `i18n.views.manage.date_placeholder` | dd / mm / yyyy | jj / mm / aaaa |
| `i18n.views.manage.error` | Error | Erreur |
| `i18n.views.manage.error_required_fields` | Please fill in all required fields. | Veuillez remplir tous les champs obligatoires. |

### Progression et collecte

| Clé | EN | FR |
|-----|----|----|
| `i18n.views.manage.adding_collector` | Adding collector | Ajout du collecteur |
| `i18n.views.manage.collecting_data` | Collecting data... | Collecte des données... |
| `i18n.views.manage.collection_complete` | Collection Complete | Collecte terminée |
| `i18n.views.manage.collection_success_message` | Your invoices have been collected successfully | Vos factures ont été collectées avec succès |
| `i18n.views.manage.collection_failed` | Collection Failed | Échec de la collecte |
| `i18n.views.manage.invalid_credentials` | Invalid credentials | Identifiants invalides |
| `i18n.views.manage.unknown` | Oops! Something went wrong... Lets try again later. | Oups ! Quelque chose s'est mal passé... Veuillez réessayer plus tard. |

### Authentification 2FA

| Clé | EN | FR |
|-----|----|----|
| `i18n.views.manage.2fa.placeholder` | 2FA code received by email or SMS | Code 2FA reçu par email ou SMS |
| `i18n.views.manage.verification_code` | Verification code | Code de vérification |
| `i18n.views.manage.verification_code.placeholder` | 6 digits verification code received by email | Code de vérification à 6 chiffres reçu par email |
| `i18n.views.manage.verification_code.error` | Incorrect verification code | Code de vérification incorrect |

### Canvas (connexion manuelle)

| Clé | EN | FR |
|-----|----|----|
| `i18n.views.manage.canvas_instruction` | Connect your account below, and then confirm your connection. | Connectez-vous ci-dessous, puis confirmez votre connexion. |
| `i18n.views.manage.logged_in` | I'm logged in | Je suis connecté |

### Collecteur en développement (sketch)

| Clé | EN | FR |
|-----|----|----|
| `i18n.views.manage.sketch` | This collector is in development. Use the button below to let us know that you need it. | Ce collecteur est en développement. Utilisez le bouton ci-dessous pour nous signaler que vous en avez besoin. |
| `i18n.views.manage.sketch.hit` | I need this collector to be developed! | J'ai besoin que ce collecteur soit développé ! |
| `i18n.views.manage.sketch.hit.done` | Thank you for your feedback! We have been informed and will try to add it as soon as possible. | Merci pour votre signalement ! Nous avons été informés et nous allons essayer de l'ajouter dès que possible. |

### Demande de nouveau collecteur

| Clé | EN | FR |
|-----|----|----|
| `i18n.views.manage.request_new_collector` | Request New Collector | Demander un nouveau collecteur |
| `i18n.views.manage.feedback.url` | Website URL | URL du site web |
| `i18n.views.manage.submit_request` | Submit Request | Envoyer la demande |
| `i18n.views.manage.request_success` | Your request has been submitted successfully! | Votre demande a été envoyée avec succès ! |
| `i18n.views.manage.request_error` | An error occurred. Please try again. | Une erreur est survenue. Veuillez réessayer. |

### Conditions d'utilisation

| Clé | EN | FR |
|-----|----|----|
| `i18n.views.manage.terms_conditions` | Terms of Use | Conditions générales d'utilisation |
| `i18n.views.manage.terms_conditions.read` | I acknowledge that I have read and accept the | Je reconnais avoir pris connaissance et accepter les |

### Datepicker - Général

| Clé | EN | FR |
|-----|----|----|
| `i18n.views.manage.datepicker_clear` | Clear | Effacer |
| `i18n.views.manage.datepicker_placeholder` | Select a date | Sélectionnez une date |

### Datepicker - Mois

| Clé | EN | FR |
|-----|----|----|
| `i18n.views.manage.datepicker.months.january` | January | Janvier |
| `i18n.views.manage.datepicker.months.february` | February | Février |
| `i18n.views.manage.datepicker.months.march` | March | Mars |
| `i18n.views.manage.datepicker.months.april` | April | Avril |
| `i18n.views.manage.datepicker.months.may` | May | Mai |
| `i18n.views.manage.datepicker.months.june` | June | Juin |
| `i18n.views.manage.datepicker.months.july` | July | Juillet |
| `i18n.views.manage.datepicker.months.august` | August | Août |
| `i18n.views.manage.datepicker.months.september` | September | Septembre |
| `i18n.views.manage.datepicker.months.october` | October | Octobre |
| `i18n.views.manage.datepicker.months.november` | November | Novembre |
| `i18n.views.manage.datepicker.months.december` | December | Décembre |

### Datepicker - Jours de la semaine

| Clé | EN | FR |
|-----|----|----|
| `i18n.views.manage.datepicker.weekdays.mon` | Mon | Lun |
| `i18n.views.manage.datepicker.weekdays.tue` | Tue | Mar |
| `i18n.views.manage.datepicker.weekdays.wed` | Wed | Mer |
| `i18n.views.manage.datepicker.weekdays.thu` | Thu | Jeu |
| `i18n.views.manage.datepicker.weekdays.fri` | Fri | Ven |
| `i18n.views.manage.datepicker.weekdays.sat` | Sat | Sam |
| `i18n.views.manage.datepicker.weekdays.sun` | Sun | Dim |

## Ajouter une nouvelle traduction

### Étape 1 : Ajouter la clé dans les fichiers JSON

**locales/en.json** :
```json
"i18n.views.manage.ma_nouvelle_cle": "My new text"
```

**locales/fr.json** :
```json
"i18n.views.manage.ma_nouvelle_cle": "Mon nouveau texte"
```

### Étape 2 : Utiliser dans le template EJS

```html
<p><%= __('i18n.views.manage.ma_nouvelle_cle') %></p>
```

### Étape 3 : (Optionnel) Exposer au JavaScript

Si la traduction doit être utilisée dans le JavaScript côté client, l'ajouter dans le bloc `<script>` du template :

**views/ui/ui.ejs** (section JavaScript) :
```javascript
const i18n = {
    // ... existant ...
    maNouvelleCle: "<%= __('i18n.views.manage.ma_nouvelle_cle') %>"
};
```

**Usage dans script.js** :
```javascript
element.textContent = i18n.maNouvelleCle;
```

## Ajouter une nouvelle langue

### Étape 1 : Créer le fichier de traduction

Créer `locales/de.json` (exemple pour l'allemand) en copiant `en.json` et en traduisant toutes les valeurs.

### Étape 2 : Configurer le serveur

La configuration du serveur doit reconnaître la nouvelle locale. Cette partie dépend de votre framework backend (Express, etc.).

## Clés utilisées dans JavaScript

Ces clés sont exposées à JavaScript via l'objet `i18n` dans le template :

```javascript
const i18n = {
    // Liste des collecteurs
    cantFindCollector: "...",
    letUsKnow: "...",
    requestNew: "...",
    
    // Validation du formulaire
    fieldsRequired: "...",
    fieldRequired: "...",
    
    // Datepicker
    datepicker: {
        clear: "...",
        placeholder: "...",
        months: [...],
        weekdays: [...]
    }
};
```

## Bonnes pratiques

1. **Convention de nommage** : Utiliser le format `i18n.views.manage.{section}.{element}`
2. **Pas de HTML dans les traductions** : Éviter le HTML dans les valeurs JSON
3. **Paramètres dynamiques** : Pour les textes avec variables, utiliser des placeholders
4. **Cohérence** : Garder la même structure de clés entre les langues
5. **Documentation** : Commenter les nouvelles clés si leur usage n'est pas évident

## Traductions dynamiques avec paramètres

Si vous devez inclure des valeurs dynamiques dans les traductions, utilisez un format de placeholder :

**locales/en.json** :
```json
"i18n.views.manage.invoices_count": "{{count}} invoices collected"
```

**locales/fr.json** :
```json
"i18n.views.manage.invoices_count": "{{count}} factures collectées"
```

La gestion des placeholders dépend de votre configuration i18n côté serveur.